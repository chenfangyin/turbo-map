# ğŸš€ TurboMap - ã‚¿ãƒ¼ãƒœãƒãƒ£ãƒ¼ã‚¸ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«

> è¤‡é›‘ãªãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚­ãƒ¼ã¨ã—ã¦ã‚µãƒãƒ¼ãƒˆã™ã‚‹é«˜æ€§èƒ½ã§å‹å®‰å…¨ãªMapå®Ÿè£…ã€ES Map APIã¨å®Œå…¨äº’æ›

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- âœ… **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 62.29% (197å€‹ã®ãƒ†ã‚¹ãƒˆã™ã¹ã¦é€šé)
- âœ… **ã‚³ãƒ¼ãƒ‰å“è³ª**: ESLintã¨TypeScriptãƒã‚§ãƒƒã‚¯é€šé
- âœ… **ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **: CommonJSã€ESMã€UMDå½¢å¼ã‚’ã‚µãƒãƒ¼ãƒˆ
- âœ… **CI/CD**: å®Œå…¨ãªè‡ªå‹•åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- âœ… **ã‚¹ã‚¯ãƒªãƒ—ãƒˆæœ€é©åŒ–**: ã™ã¹ã¦ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ©Ÿèƒ½å®Œå…¨ã§å†—é•·æ€§ãªã—
- âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯é€šé
- âœ… **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆæ­£å¸¸å®Ÿè¡Œ

## ğŸ“– ç›®æ¬¡

- [ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹](#-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹)
- [âœ¨ ã‚³ã‚¢æ©Ÿèƒ½](#-ã‚³ã‚¢æ©Ÿèƒ½)
- [ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](#-ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ)
- [ğŸ“š API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#-api-ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)
- [ğŸ’¡ ä½¿ç”¨ä¾‹](#-ä½¿ç”¨ä¾‹)
- [âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
- [ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](#-ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹)
- [ğŸ”„ ç§»è¡Œã‚¬ã‚¤ãƒ‰](#-ç§»è¡Œã‚¬ã‚¤ãƒ‰)
- [ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ](#-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ)
- [ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- [ğŸ“¦ ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹](#-ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹)
- [ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ](#-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ )
- [ğŸš€ ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹èª¬æ˜](#-ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹èª¬æ˜)
- [ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#-ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)
- [ğŸ¤ è²¢çŒ®](#-è²¢çŒ®)

## âœ¨ ã‚³ã‚¢æ©Ÿèƒ½

### ğŸš€ ã‚¿ãƒ¼ãƒœãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **3-5å€ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**ï¼šLRUã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€é«˜é€Ÿãƒãƒƒã‚·ãƒ¥ãƒ‘ã‚¹ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«æœ€é©åŒ–
- **ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ¢ãƒªç®¡ç†**ï¼šè‡ªå‹•ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**ï¼šçµ„ã¿è¾¼ã¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã¨ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«

### ğŸ” å®Œå…¨ãªå‹å®‰å…¨æ€§
- **TypeScriptãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**ï¼šã™ã¹ã¦ã®æ“ä½œã§å…ƒã®ã‚­ãƒ¼å‹ã‚’ç¶­æŒ
- **ã‚¹ãƒãƒ¼ãƒˆå‹æ¨è«–**ï¼šè‡ªå‹•ã‚­ãƒ¼å€¤å‹æ¨è«–
- **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒã‚§ãƒƒã‚¯**ï¼šå‹ã‚¨ãƒ©ãƒ¼ã‚’æ—©æœŸç™ºè¦‹

### ğŸ”„ æ·±ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¯”è¼ƒ
- **ä»»æ„ã®ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«**ï¼šè¤‡é›‘ãªãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚­ãƒ¼ã¨ã—ã¦ã‚µãƒãƒ¼ãƒˆ
- **å¾ªç’°å‚ç…§å‡¦ç†**ï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–“ã®å¾ªç’°å‚ç…§ã‚’å®‰å…¨ã«å‡¦ç†
- **ç‰¹æ®Šå‹ã‚µãƒãƒ¼ãƒˆ**ï¼šDateã€RegExpã€Arrayã€Functionãªã©

### ğŸ¯ ES Map å®Œå…¨äº’æ›
- **Symbol.iterator**ï¼š`for...of`ãƒ«ãƒ¼ãƒ—ã‚’ã‚µãƒãƒ¼ãƒˆ
- **Symbol.toStringTag**ï¼šæ­£ã—ã„`toString()`å‹•ä½œ
- **ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰**ï¼š`new Map(entries)`æ§‹æ–‡ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ã™ã¹ã¦ã®æ¨™æº–ãƒ¡ã‚½ãƒƒãƒ‰**ï¼š`set`ã€`get`ã€`has`ã€`delete`ã€`clear`ãªã©

### ğŸ”Œ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒ•ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ **ï¼š`beforeSet`ã€`afterGet`ãªã©ã®ãƒ•ãƒƒã‚¯ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œ**ï¼šæ‹¡å¼µå¯èƒ½ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªæ“ä½œ
- **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†**ï¼šå‹•çš„ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ ã¨å‰Šé™¤

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
- Node.js >= 14.0.0
- TypeScript >= 4.0.0 (æ¨å¥¨)

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰

```bash
# npmã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install turbo-map

# yarnã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
yarn add turbo-map

# pnpmã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm add turbo-map

# bunã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
bun add turbo-map

# denoã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (npm:çµŒç”±)
import { createTurboMap } from "npm:turbo-map"

# GitHubãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install github:chenfangyin/turbo-map
yarn add github:chenfangyin/turbo-map
pnpm add github:chenfangyin/turbo-map
bun add github:chenfangyin/turbo-map

# ç‰¹å®šã®ãƒ–ãƒ©ãƒ³ãƒã‚„ã‚¿ã‚°ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install github:chenfangyin/turbo-map#main
npm install github:chenfangyin/turbo-map#v1.0.1
```

#### å‹å®šç¾©
TurboMapã«ã¯å®Œå…¨ãªTypeScriptå‹å®šç¾©ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€è¿½åŠ ã®`@types`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

#### ãƒ–ãƒ©ã‚¦ã‚¶ä½¿ç”¨ (CDN)

```html
<!-- ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ (æ¨å¥¨) -->
<script type="module">
  import { createTurboMap } from 'https://unpkg.com/turbo-map@latest/dist/index.esm.js'
  
  const userMap = createTurboMap()
  userMap.set({ id: 1, name: 'ç”°ä¸­' }, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°')
</script>

<!-- UMDãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ -->
<script src="https://unpkg.com/turbo-map@latest/dist/index.umd.js"></script>
<script>
  const userMap = TurboMap.default()
  userMap.set({ id: 1, name: 'ç”°ä¸­' }, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°')
</script>

<!-- åœ§ç¸®ç‰ˆUMDãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ -->
<script src="https://unpkg.com/turbo-map@latest/dist/index.umd.min.js"></script>
<script>
  const userMap = TurboMap.default()
  userMap.set({ id: 1, name: 'ç”°ä¸­' }, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°')
</script>
```

#### é–‹ç™ºç’°å¢ƒ

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/chenfangyin/turbo-map.git
cd turbo-map

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
npm run dev

# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test
```

### åŸºæœ¬çš„ãªä½¿ç”¨

```typescript
// åå‰ä»˜ãã‚¤ãƒ³ãƒãƒ¼ãƒˆ (æ¨å¥¨)
import { createTurboMap } from 'turbo-map'

// ä»–ã®é–¢æ•°ã®åå‰ä»˜ãã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { turboMapFactory, createTypeSafeTurboMap } from 'turbo-map'

// ã™ã¹ã¦ã®é–¢æ•°ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { createTurboMap, turboMapFactory, createTypeSafeTurboMap } from 'turbo-map'

// TurboMapã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
const userMap = createTurboMap<{ id: number; name: string }, string>()

// ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
userMap.set({ id: 1, name: "ç”°ä¸­" }, "ãƒ¦ãƒ¼ã‚¶ãƒ¼1ã®è©³ç´°")
userMap.set({ id: 2, name: "ä½è—¤" }, "ãƒ¦ãƒ¼ã‚¶ãƒ¼2ã®è©³ç´°")

// ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾— - ç•°ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚‚ã€å†…å®¹ãŒåŒã˜ãªã‚‰ä¸€è‡´
console.log(userMap.get({ id: 1, name: "ç”°ä¸­" })) // "ãƒ¦ãƒ¼ã‚¶ãƒ¼1ã®è©³ç´°"

// ES Map APIã¨å®Œå…¨äº’æ›
for (const [key, value] of userMap) {
  console.log(`${key.name}: ${value}`)
}
```

### é…åˆ—ã‹ã‚‰åˆæœŸåŒ–

```typescript
// Mapã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨å®Œå…¨äº’æ›
const turboMap = createTurboMap([
  [{ id: 1, name: 'ç”°ä¸­' }, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼1'],
  [{ id: 2, name: 'ä½è—¤' }, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼2']
])

console.log(turboMap.size) // 2
console.log(turboMap.toString()) // "[object TurboMap]"
```

## ğŸ“š API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã‚³ã‚¢é–¢æ•°

#### `createTurboMap<K, V>(entries?, options?)`

é«˜åº¦ãªæ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ‹¡å¼µTurboMapã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**
- `entries?` - åˆæœŸã‚­ãƒ¼å€¤ãƒšã‚¢ã®é…åˆ—ã¾ãŸã¯åå¾©å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- `options?` - è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

**æˆ»ã‚Šå€¤ï¼š** `EnhancedTurboMapLike<K, V>`

**ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ï¼š**
```typescript
// é…åˆ—ã‹ã‚‰åˆæœŸåŒ–
createTurboMap<{ id: number }, string>([
  [{ id: 1 }, 'value1']
])

// è¨­å®šã®ã¿
createTurboMap<{ id: number }, string>({
  enableCache: true,
  cacheMaxSize: 1000,
  enablePlugins: true,
  enableAsync: true
})

// é…åˆ— + è¨­å®š
createTurboMap<{ id: number }, string>([
  [{ id: 1 }, 'value1']
], {
  enableCache: true,
  enableDiagnostics: true
})
```

### è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### `EnhancedTurboMapOptions`

```typescript
interface EnhancedTurboMapOptions {
  // ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableCache?: boolean
  cacheMaxSize?: number
  enableAdaptiveSerialization?: boolean
  
  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableMetrics?: boolean
  enableAutoCleanup?: boolean
  cleanupInterval?: number
  
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableTieredCache?: boolean
  l1CacheSize?: number
  l2CacheSize?: number
  promoteThreshold?: number
  
  // ã‚¨ãƒ©ãƒ¼å›å¾©ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableErrorRecovery?: boolean
  maxRetries?: number
  fallbackMode?: boolean
  
  // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enablePlugins?: boolean
  pluginTimeout?: number
  
  // è¨ºæ–­ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableDiagnostics?: boolean
  trackPerformance?: boolean
  
  // éåŒæœŸã‚ªãƒ—ã‚·ãƒ§ãƒ³
  enableAsync?: boolean
  batchSize?: number
  maxConcurrency?: number
}
```

### ã‚³ã‚¢ãƒ¡ã‚½ãƒƒãƒ‰

#### æ¨™æº–Mapãƒ¡ã‚½ãƒƒãƒ‰

```typescript
interface TurboMapLike<K, V> {
  /** ãƒãƒƒãƒ—å†…ã®ã‚­ãƒ¼å€¤ãƒšã‚¢ã®æ•° */
  readonly size: number
  
  /** ã‚­ãƒ¼å€¤ãƒšã‚¢ã‚’è¨­å®šã€ãƒã‚§ãƒ¼ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ */
  set(key: K, value: V): TurboMapLike<K, V>
  
  /** æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ã®å€¤ã‚’å–å¾— */
  get(key: K): V | undefined
  
  /** æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ */
  has(key: K): boolean
  
  /** æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ã®ã‚­ãƒ¼å€¤ãƒšã‚¢ã‚’å‰Šé™¤ */
  delete(key: K): boolean
  
  /** ã™ã¹ã¦ã®ã‚­ãƒ¼å€¤ãƒšã‚¢ã‚’ã‚¯ãƒªã‚¢ */
  clear(): void
  
  /** ã™ã¹ã¦ã®å…ƒã®ã‚­ãƒ¼ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ */
  keys(): IterableIterator<K>
  
  /** ã™ã¹ã¦ã®å€¤ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ */
  values(): IterableIterator<V>
  
  /** ã™ã¹ã¦ã®å…ƒã®ã‚­ãƒ¼å€¤ãƒšã‚¢ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ */
  entries(): IterableIterator<[K, V]>
  
  /** ã™ã¹ã¦ã®ã‚­ãƒ¼å€¤ãƒšã‚¢ã‚’åå¾© */
  forEach(callback: (value: V, key: K, map: TurboMapLike<K, V>) => void): void
}
```

#### ğŸš€ TurboMapå°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰

```typescript
interface TurboMapLike<K, V> {
  /** ã‚­ãƒ¼å€¤ãƒšã‚¢ã‚’ä¸€æ‹¬è¨­å®š */
  setAll(entries: [K, V][]): TurboMapLike<K, V>
  
  /** å€¤ã‚’ä¸€æ‹¬å–å¾— */
  getAll(keys: K[]): (V | undefined)[]
  
  /** æ¡ä»¶ä»˜ãæ¤œç´¢ */
  findByValue(predicate: (value: V, key: K) => boolean): [K, V] | undefined
  
  /** ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã‚’å–å¾— */
  getMetrics(): PerformanceMetrics
  
  /** ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’å–å¾— */
  debug(): DebugInfo
  
  /** ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ  */
  addPlugin(plugin: TurboMapPlugin<K, V>): void
  
  /** ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‰Šé™¤ */
  removePlugin(pluginName: string): boolean
  
  /** æ‰‹å‹•ãƒ¡ãƒ¢ãƒªæœ€é©åŒ– */
  optimizeMemory(): void
  
  /** ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æ¨å®š */
  estimateMemoryUsage(): number
  
  /** ã‚­ãƒ¼åˆ†å¸ƒã‚’åˆ†æ */
  analyzeKeyDistribution(keys: string[]): Record<string, number>
  
  /** ã‚­ãƒ¼ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ–‡å­—åˆ—ã‚’å–å¾—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰ */
  getSerializedKey(key: K): string
}
```

### ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°

#### `turboMapFactory<K, V>()`

å‹å®‰å…¨ãªãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚

```typescript
const createUserCache = turboMapFactory<{ id: number }, UserData>()

const userCache = createUserCache({
  enableCache: true,
  cacheMaxSize: 500
})
```

#### `createTypeSafeTurboMap<T>()`

ã‚ˆã‚Šè‰¯ã„å‹æ¨è«–ã‚’æŒã¤å¼·å‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚

```typescript
const createApiCache = createTypeSafeTurboMap<ApiRequest>()

const apiCache = createApiCache<ApiRequest, Response>({
  enableMetrics: true
})
```

## ğŸ’¡ ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°

```typescript
import { createTurboMap } from 'turbo-map'

// ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚­ãƒ£ãƒƒã‚·ãƒ¥
const userCache = createTurboMap<{ id: number; name: string }, UserData>()

userCache.set({ id: 1, name: "ç”°ä¸­" }, {
  email: "tanaka@example.com",
  role: "admin"
})

// ç•°ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚‚ã€å†…å®¹ãŒåŒã˜ãªã‚‰ä¸€è‡´
const userData = userCache.get({ id: 1, name: "ç”°ä¸­" })
console.log(userData) // { email: "tanaka@example.com", role: "admin" }
```

### è¤‡é›‘ãªãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

```typescript
interface ApiRequest {
  endpoint: string
  method: 'GET' | 'POST'
  query?: Record<string, string>
  body?: Record<string, any>
  headers?: Record<string, string>
}

interface ApiResponse {
  data: any
  timestamp: Date
  ttl: number
}

const apiCache = createTurboMap<ApiRequest, ApiResponse>({
  enableCache: true,
  cacheMaxSize: 1000,
  enableMetrics: true
})

// APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
const request: ApiRequest = {
  endpoint: '/api/users',
  method: 'GET',
  query: { page: 1, limit: 20 },
  headers: { 'Authorization': 'Bearer token123' }
}

apiCache.set(request, {
  data: [{ id: 1, name: 'User 1' }],
  timestamp: new Date(),
  ttl: 300
})

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ã‚¨ãƒª - å®Œå…¨ã«åŒä¸€ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹é€ 
const cachedResponse = apiCache.get({
  endpoint: '/api/users',
  method: 'GET',
  query: { page: 1, limit: 20 },
  headers: { 'Authorization': 'Bearer token123' }
})

if (cachedResponse) {
  console.log('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ:', cachedResponse.data)
}
```

### ä¸€æ‹¬æ“ä½œ

```typescript
const userMap = createTurboMap<{ id: number }, string>()

// ä¸€æ‹¬è¨­å®š
userMap.setAll([
  [{ id: 1 }, 'User 1'],
  [{ id: 2 }, 'User 2'],
  [{ id: 3 }, 'User 3']
])

// ä¸€æ‹¬å–å¾—
const keys = [{ id: 1 }, { id: 2 }, { id: 4 }]
const values = userMap.getAll(keys)
console.log(values) // ['User 1', 'User 2', undefined]

// æ¡ä»¶ä»˜ãæ¤œç´¢
const adminUser = userMap.findByValue((value, key) => 
  value.includes('admin') && key.id > 100
)
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```typescript
const cache = createTurboMap<ApiRequest, Response>({
  enableMetrics: true,
  enableCache: true
})

// ã„ãã¤ã‹ã®æ“ä½œã‚’å®Ÿè¡Œ
cache.set(request1, response1)
cache.set(request2, response2)
cache.get(request1)

// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã‚’è¡¨ç¤º
const metrics = cache.getMetrics()
console.log('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™:', {
  ãƒ’ãƒƒãƒˆç‡: `${(metrics.hitRate * 100).toFixed(2)}%`,
  ç·æ“ä½œæ•°: metrics.totalOperations,
  ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ: metrics.cacheHits,
  é«˜é€Ÿãƒ‘ã‚¹ä½¿ç”¨: metrics.fastPathUsage,
  å¹³å‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“: `${metrics.averageSerializationTime.toFixed(2)}ms`,
  ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: `${(metrics.memoryUsage / 1024).toFixed(2)}KB`,
  ã‚¨ãƒ©ãƒ¼æ•°: metrics.errorCount
})

// ãƒ‡ãƒãƒƒã‚°æƒ…å ±
const debugInfo = cache.debug()
console.log('ãƒ‡ãƒãƒƒã‚°æƒ…å ±:', {
  ã‚µã‚¤ã‚º: debugInfo.size,
  ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º: debugInfo.cacheSize,
  ã‚­ãƒ¼åˆ†å¸ƒ: debugInfo.keyDistribution,
  æœ€å¤§ã‚­ãƒ¼: debugInfo.largestKeys,
  ãƒ¡ãƒ¢ãƒªæ¨å®š: `${(debugInfo.memoryEstimate / 1024).toFixed(2)}KB`,
  ãƒ’ãƒƒãƒˆç‡: `${(debugInfo.hitRate * 100).toFixed(2)}%`
})
```

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

```typescript
// ãƒ­ã‚°ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œæˆ
const loggingPlugin: TurboMapPlugin<ApiRequest, Response> = {
  name: 'logging',
  beforeSet(key, value) {
    console.log(`ğŸš€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š: ${key.endpoint}`)
    return { key, value }
  },
  afterGet(key, value) {
    if (value) {
      console.log(`âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ: ${key.endpoint}`)
    } else {
      console.log(`âŒ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹: ${key.endpoint}`)
    }
    return value
  }
}

const cache = createTurboMap<ApiRequest, Response>()
cache.addPlugin(loggingPlugin)

// ç›£è¦–ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œæˆ
const monitoringPlugin: TurboMapPlugin<ApiRequest, Response> = {
  name: 'monitoring',
  beforeSet(key, value) {
    // è¨­å®šæ“ä½œã‚’è¨˜éŒ²
    console.log(`ğŸ“Š ç›£è¦–: ${key.method} ${key.endpoint} ã‚’è¨­å®š`)
  },
  afterDelete(key, deleted) {
    if (deleted) {
      console.log(`ğŸ—‘ï¸ ç›£è¦–: ${key.method} ${key.endpoint} ã‚’å‰Šé™¤`)
    }
  }
}

cache.addPlugin(monitoringPlugin)
```

### ES Mapå®Œå…¨äº’æ›æ€§

```typescript
// é…åˆ—ã‹ã‚‰åˆæœŸåŒ–
const turboMap = createTurboMap([
  [{ id: 1, name: 'ç”°ä¸­' }, 'User 1'],
  [{ id: 2, name: 'ä½è—¤' }, 'User 2']
])

// for...ofãƒ«ãƒ¼ãƒ—ã¨å®Œå…¨äº’æ›
for (const [key, value] of turboMap) {
  console.log(`${key.name}: ${value}`)
}

// Array.fromã¨å®Œå…¨äº’æ›
const entries = Array.from(turboMap)
console.log('é…åˆ—ã«å¤‰æ›:', entries)

// åˆ†å‰²ä»£å…¥ã¨å®Œå…¨äº’æ›
const [firstEntry] = turboMap
console.log('æœ€åˆã®ã‚¨ãƒ³ãƒˆãƒª:', firstEntry)

// ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã¨å®Œå…¨äº’æ›
const allEntries = [...turboMap]
console.log('ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒˆãƒª:', allEntries)

// æ­£ã—ã„toStringå‹•ä½œ
console.log(turboMap.toString()) // "[object TurboMap]"
console.log(Object.prototype.toString.call(turboMap)) // "[object TurboMap]"
```

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ã‚¿ãƒ¼ãƒœãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ©Ÿèƒ½

#### 1. LRUã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- **ã‚¹ãƒãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥**ï¼šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦é‡è¤‡è¨ˆç®—ã‚’å›é¿
- **è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**ï¼šã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒé–¾å€¤ã«é”ã—ãŸã¨ãã€æœ€ã‚‚é•·ãä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- **è¨­å®šå¯èƒ½ã‚µã‚¤ã‚º**ï¼šãƒ¡ãƒ¢ãƒªè¦ä»¶ã«åŸºã¥ã„ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºã‚’èª¿æ•´

#### 2. é«˜é€Ÿãƒãƒƒã‚·ãƒ¥ãƒ‘ã‚¹
- **ã‚·ãƒ³ãƒ—ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæœ€é©åŒ–**ï¼š3å€‹ä»¥ä¸‹ã®ã‚­ãƒ¼ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é«˜é€Ÿãƒãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**ï¼šå®Œå…¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚ˆã‚Š3-5å€é«˜é€Ÿ
- **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**ï¼šè¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯è‡ªå‹•çš„ã«å®Œå…¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

#### 3. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«å†åˆ©ç”¨
- **WeakSetãƒ—ãƒ¼ãƒ«**ï¼šWeakSetã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å†åˆ©ç”¨ã—ã¦GCåœ§åŠ›ã‚’è»½æ¸›
- **ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–**ï¼šé »ç¹ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ç ´æ£„ã‚’å›é¿
- **è‡ªå‹•ç®¡ç†**ï¼šãƒ—ãƒ¼ãƒ«ã‚µã‚¤ã‚ºã‚’è‡ªå‹•ç®¡ç†

#### 4. ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ¢ãƒªç®¡ç†
- **è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**ï¼šæœŸé™åˆ‡ã‚Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®šæœŸçš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- **ãƒ¡ãƒ¢ãƒªç›£è¦–**ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–
- **æ‰‹å‹•æœ€é©åŒ–**ï¼šæ‰‹å‹•ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®šæ¨å¥¨äº‹é …

```typescript
// é«˜æ€§èƒ½è¨­å®š
const highPerfCache = createTurboMap({
  enableCache: true,
  cacheMaxSize: 2000,      // å¤§å®¹é‡ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  strictMode: true,         // å³å¯†ãƒ¢ãƒ¼ãƒ‰
  enableMetrics: true,      // ç›£è¦–ã‚’æœ‰åŠ¹åŒ–
  enableAutoCleanup: true,  // è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  cleanupInterval: 15000    // 15ç§’ã”ã¨ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
})

// ãƒ¡ãƒ¢ãƒªæ•æ„Ÿè¨­å®š
const memorySensitiveCache = createTurboMap({
  enableCache: true,
  cacheMaxSize: 100,       // å°å®¹é‡ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  strictMode: false,        // ç·©å’Œãƒ¢ãƒ¼ãƒ‰
  enableMetrics: false,     // ç›£è¦–ã‚’ç„¡åŠ¹åŒ–
  enableAutoCleanup: true,
  cleanupInterval: 5000     // 5ç§’ã”ã¨ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
})

// é–‹ç™ºãƒ‡ãƒãƒƒã‚°è¨­å®š
const debugCache = createTurboMap({
  enableCache: true,
  cacheMaxSize: 500,
  strictMode: false,
  enableMetrics: true,      // ç›£è¦–ã‚’æœ‰åŠ¹åŒ–
  enableAutoCleanup: false, // ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’ç„¡åŠ¹åŒ–
})
```

## ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. å‹å®‰å…¨æ€§

```typescript
// âœ… æ¨å¥¨ï¼šå‹ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š
const userCache = createTurboMap<{ id: number; name: string }, UserData>()

// âŒ å›é¿ï¼šanyã‚’ä½¿ç”¨
const cache = createTurboMap<any, any>()
```

### 2. ã‚­ãƒ¼è¨­è¨ˆ

```typescript
// âœ… æ¨å¥¨ï¼šã‚·ãƒ³ãƒ—ãƒ«ã§å®‰å®šã—ãŸã‚­ãƒ¼
interface UserKey {
  id: number
  type: 'user' | 'admin'
}

// âŒ å›é¿ï¼šå¯å¤‰ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚­ãƒ¼
interface BadKey {
  id: number
  lastLogin: Date  // å¤‰æ›´ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  sessionId: string // å¤‰æ›´ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
}
```

### 3. ãƒ¡ãƒ¢ãƒªç®¡ç†

```typescript
// âœ… æ¨å¥¨ï¼šå®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
const cache = createTurboMap({
  enableAutoCleanup: true,
  cleanupInterval: 30000
})

// æ‰‹å‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
cache.optimizeMemory()

// ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ç›£è¦–
const memoryUsage = cache.estimateMemoryUsage()
console.log(`ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ${(memoryUsage / 1024).toFixed(2)}KB`)
```

### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
try {
  const cache = createTurboMap()
  cache.set(complexObject, value)
} catch (error) {
  if (error.message.includes('ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã›ã‚“')) {
    console.warn('ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã›ã‚“ã€‚ã‚­ãƒ¼æ§‹é€ ã‚’ç¢ºèªã—ã¦ãã ã•ã„')
  }
}
```

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```typescript
const cache = createTurboMap({
  enableMetrics: true
})

// å®šæœŸçš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯
setInterval(() => {
  const metrics = cache.getMetrics()
  if (metrics.hitRate < 0.5) {
    console.warn('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ãŒä½ã„ã§ã™ã€‚æˆ¦ç•¥ã®èª¿æ•´ã‚’æ¤œè¨ã—ã¦ãã ã•ã„')
  }
}, 60000)
```

### 6. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ç”¨

```typescript
// å†åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œæˆ
const createLoggingPlugin = (name: string) => ({
  name,
  beforeSet(key, value) {
    console.log(`[${name}] è¨­å®š:`, key)
    return { key, value }
  }
})

const cache = createTurboMap()
cache.addPlugin(createLoggingPlugin('UserCache'))
```

## ğŸ”„ ç§»è¡Œã‚¬ã‚¤ãƒ‰

### ãƒã‚¤ãƒ†ã‚£ãƒ–Mapã‹ã‚‰

```typescript
// ãƒã‚¤ãƒ†ã‚£ãƒ–Map
const nativeMap = new Map()
nativeMap.set('key', 'value')

// TurboMapã«ç§»è¡Œ
const turboMap = createTurboMap<string, string>()
turboMap.set('key', 'value')

// ã™ã¹ã¦ã®ãƒã‚¤ãƒ†ã‚£ãƒ–Mapãƒ¡ã‚½ãƒƒãƒ‰ãŒäº’æ›
console.log(turboMap.size)
console.log(turboMap.get('key'))
turboMap.delete('key')
turboMap.clear()
```

### ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼Mapã‹ã‚‰

```typescript
// å¾“æ¥ã®æ–¹æ³•ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ã‚’å‡¦ç†ã§ããªã„ï¼‰
const traditionalMap = new Map()
// âŒ ã“ã‚Œã¯æœŸå¾…é€šã‚Šã«å‹•ä½œã—ã¾ã›ã‚“
traditionalMap.set({ id: 1 }, 'value')

// TurboMapã«ç§»è¡Œ
const turboMap = createTurboMap<{ id: number }, string>()
turboMap.set({ id: 1 }, 'value')

// âœ… ä»Šã¯æ­£ã—ãå‹•ä½œã—ã¾ã™
console.log(turboMap.get({ id: 1 })) // 'value'
```

### ä»–ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰

```typescript
// LRU Cacheã‹ã‚‰ç§»è¡Œ
import LRUCache from 'lru-cache'

const lruCache = new LRUCache({
  max: 1000
})

// TurboMapã«ç§»è¡Œ
const turboMap = createTurboMap({
  enableCache: true,
  cacheMaxSize: 1000
})

// ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬ç§»è¡Œ
for (const [key, value] of lruCache.entries()) {
  turboMap.set(key, value)
}
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ

### ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœ

| æ“ä½œ | ãƒã‚¤ãƒ†ã‚£ãƒ–Map | TurboMap | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š |
|------|---------------|----------|-------------------|
| ã‚·ãƒ³ãƒ—ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ | 1x | 3.2x | 220% |
| è¤‡é›‘ãªãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ | 1x | 4.8x | 380% |
| ä¸€æ‹¬æ“ä½œ | 1x | 2.1x | 110% |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 1x | 0.8x | 20% ç¯€ç´„ |

### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ¯”è¼ƒ

```typescript
// ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼š1000å€‹ã®è¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼
const testData = Array.from({ length: 1000 }, (_, i) => [
  { id: i, config: { theme: 'dark', lang: 'ja' } },
  `value_${i}`
])

// ãƒã‚¤ãƒ†ã‚£ãƒ–Mapï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ã‚’å‡¦ç†ã§ããªã„ï¼‰
// æ–‡å­—åˆ—ã‚­ãƒ¼ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚ˆã‚Šå¤šãã®ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨

// TurboMap
const turboMap = createTurboMap(testData, {
  enableCache: true,
  cacheMaxSize: 500
})

console.log('ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡:', turboMap.estimateMemoryUsage())
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

```typescript
// å•é¡Œï¼šé–¢æ•°ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã›ã‚“
const badKey = {
  id: 1,
  handler: () => console.log('hello') // âŒ é–¢æ•°ã¯ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã›ã‚“
}

// è§£æ±ºç­–ï¼šé–¢æ•°ã‚’å‰Šé™¤ã™ã‚‹ã‹ç·©å’Œãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
const goodKey = {
  id: 1,
  handlerName: 'logHandler' // âœ… æ–‡å­—åˆ—è­˜åˆ¥å­ã‚’ä½¿ç”¨
}

const cache = createTurboMap({
  strictMode: false // ç·©å’Œãƒ¢ãƒ¼ãƒ‰
})
```

#### 2. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯

```typescript
// å•é¡Œï¼šã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¤§ãã™ãã¦ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’å¼•ãèµ·ã“ã™
const cache = createTurboMap({
  cacheMaxSize: 10000 // å¤§ãã™ãã‚‹
})

// è§£æ±ºç­–ï¼šé©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºã‚’è¨­å®š
const cache = createTurboMap({
  cacheMaxSize: 1000,
  enableAutoCleanup: true,
  cleanupInterval: 30000
})
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

```typescript
// å•é¡Œï¼šè¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ã‚’å¼•ãèµ·ã“ã™
const complexKey = {
  // éå¸¸ã«è¤‡é›‘ãªãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
}

// è§£æ±ºç­–ï¼šã‚­ãƒ¼æ§‹é€ ã‚’ç°¡ç´ åŒ–
const simpleKey = {
  id: 1,
  type: 'user'
}
```

### ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ

```typescript
const cache = createTurboMap({
  enableMetrics: true
})

// 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã‚’è¡¨ç¤º
const metrics = cache.getMetrics()
console.log('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™:', metrics)

// 2. ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º
const debug = cache.debug()
console.log('ãƒ‡ãƒãƒƒã‚°æƒ…å ±:', debug)

// 3. ã‚­ãƒ¼åˆ†å¸ƒã‚’åˆ†æ
const keyDistribution = cache.analyzeKeyDistribution(
  Array.from(cache.keys()).map(k => JSON.stringify(k))
)
console.log('ã‚­ãƒ¼åˆ†å¸ƒ:', keyDistribution)

// 4. ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’ç¢ºèª
const serializedKey = cache.getSerializedKey({ id: 1, name: 'test' })
console.log('ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³çµæœ:', serializedKey)
```

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ¤ è²¢çŒ®

Issue ã‚„ Pull Request ã®æå‡ºã‚’æ­“è¿ã—ã¾ã™ï¼

### é–¢é€£ãƒªãƒ³ã‚¯
- ğŸ“– [å®Œå…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/chenfangyin/turbo-map)
- ğŸ› [å•é¡Œå ±å‘Š](https://github.com/chenfangyin/turbo-map/issues)
- ğŸ’¡ [æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](https://github.com/chenfangyin/turbo-map/discussions)
- ğŸ“¦ [npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://www.npmjs.com/package/turbo-map)
- ğŸ“Š [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯](https://github.com/chenfangyin/turbo-map#performance)

### é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- ğŸ”— [TypeScript](https://www.typescriptlang.org/) - å‹å®‰å…¨ãª JavaScript
- ğŸ”— [Rollup](https://rollupjs.org/) - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- ğŸ”— [Jest](https://jestjs.io/) - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

---

**ğŸš€ TurboMap - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã§åŠ¹ç‡çš„ã«ï¼**
